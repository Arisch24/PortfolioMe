{% extends "layout/base.html" %} {% block title %}PortfolioMe : Upload Resume{%
endblock %} {% block css %}
<link
    rel="stylesheet"
    href="{{ url_for('static', filename='css/client/upload_resume.css') }}"
/>
{% endblock %} {% block content %}
<main class="upload-resume-container">
    <div class="upload-resume-header">
        <h1>Resume</h1>
        Upload your resumes here.
    </div>
    <form
        method="POST"
        class="form-container"
        novalidate
        enctype="multipart/form-data"
    >
        {{ form.hidden_tag() }}
        <div class="upload">
            <img
                id="temp"
                src="{{ url_for('static', filename='images/photo.png') }}"
            />
            {{ form.resume }} {% if form.resume.errors %}
            <p class="error-msg">
                {% for error in form.resume.errors %} {{ error }} {% endfor %}
            </p>
            {% endif %}
        </div>
        <div>{{ form.submit }}</div>
        <div>{{ form.output }}</div>
    </form>
</main>
{% endblock %} {% block javascript %}
<script>
    $('#temp').on('click', () => {
        $('#resume').click();
    });

    $('#resume').on('change', (e) => {
        let allowedImageExtensions = ['jpg', 'png', 'jpeg'];
        let file = e.target.files[0];
        let chosenFileExtension = file.name.split('.')[1];

        // if there is image extensions
        if (allowedImageExtensions.includes(chosenFileExtension)) {
            $('iframe').remove();
            $('#temp').css('display', 'block');
            $('#temp').attr('src', URL.createObjectURL(file));
        }
        // if the extension is pdf file
        else if (chosenFileExtension === 'pdf') {
            $('#temp').css('display', 'none');
            let filename = URL.createObjectURL(file);
            $('.upload').prepend(
                `<iframe src="${filename}" width="500" height="600"></Ã­frame>`
            );
        }
        // else restore back to normal
        else {
            $('iframe').remove();
            $('#temp').css('display', 'block');
            $('#temp').attr('src', '/static/images/photo.png');
        }
    });
</script>
{% endblock %}
